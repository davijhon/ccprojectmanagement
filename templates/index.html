{% extends 'base.html' %}

{% block content %}
       <div class="row">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">jj</th>
                        <th scope="col">Programa</th>
                        <th scope="col">Solicitante</th>
                        <th scope="col">Doc. Solicitante</th>
                        <th scope="col">Representante</th>
                        <th scope="col">Doc. Representante</th>
                        <th scope="col">Correo Representante</th>
                    </tr>
                </thead>
                <tbody>
                {% for project in projects %}
                    <tr>
                        <td><input class="form-check-input" type="checkbox" value="{{ project.id }}" id="flexCheckDefault"></td>*
                        <td>{{ project.programa }}</td>
                        <td>{{ project.solicitante }}</td>
                        <td>{{ project.documento_solicitante }}</td>
                        <td>{{ project.representante }}</td>
                        <td>{{ project.documento_representante }}</td>
                        <td>{{ project.correo_representante }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
      </div>

        <div class="col-12">
            <button id="btnDeca" class="btn btn-primary">Deca</button>
        </div>
{% endblock content %}

{% block script %}
    <script>
        function sleep(milliseconds) {
            const date = Date.now();
            let currentDate = null;
            do {
                currentDate = Date.now();
            } while (currentDate - date < milliseconds);
        }

       {#iniciliazar la funcion jquery#}
        $(document).ready(function () {
            $('#btnDeca').click(function () {
                // trae los checkbox que estÃ¡n marcados, trae todo lo que contiene el elemento o etiqueta input
                const selected = $('.form-check-input:checked')
                var cadenaid = ''

                // revisa cada uno de los marcados
                selected.each(function () {
                    //console.log($(this)[0].value)

                    cadenaid += $(this)[0].value+'-'
                })
                cadenaid = cadenaid.substring(0, cadenaid.length - 1);

                console.log(cadenaid)
                window.location.replace('http://127.0.0.1:8000/'+cadenaid)
                sleep(200);
                window.location.replace('http://127.0.0.1:8000/')
            })
        })
    </script>
{% endblock script %}